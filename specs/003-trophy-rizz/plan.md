# Implementation Plan: Trophy Rizz Presentation

**Branch**: `003-trophy-rizz` | **Date**: 2025-12-13 | **Spec**: [spec.md](spec.md)
**Input**: Feature specification from `/specs/003-trophy-rizz/spec.md`

## Summary

Enhance the trophy presentation experience with celebratory confetti animations triggered on viewport entry, a 2D spinning trophy with receiver/achievement text overlays, and functional next trophy navigation. Uses `canvas-confetti` library, IntersectionObserver for viewport detection, and CSS animations for the 8-second trophy spin. All interactions respect reduced-motion preferences and maintain desktop-optimized layout.

## Technical Context

**Language/Version**: TypeScript 5.3+ (Frontend), C# .NET 8.0 (Backend)  
**Primary Dependencies**: React 18.2, Vite 5.0, canvas-confetti, axios (Frontend) | ASP.NET Core, EF Core 8.0 (Backend)  
**Storage**: In-memory EF Core (existing sessions/trophies data)  
**Testing**: Vitest + React Testing Library (Frontend) | xUnit (Backend - no changes needed)  
**Target Platform**: Desktop web browsers (1920px optimized), modern evergreen browsers  
**Project Type**: Web application (React SPA + ASP.NET Core API)  
**Performance Goals**: 30fps minimum during confetti, confetti completes <2s, trophy navigation <500ms  
**Constraints**: 50% viewport visibility threshold, 8-second spin rotation, desktop-only optimization  
**Scale/Scope**: Unlimited trophies per session, single presentation view, no pagination required

## Constitution Check

*GATE: Must pass before Phase 0 research. Re-check after Phase 1 design.*

| Gate | Status | Notes |
|------|--------|-------|
| **I. Correctness Above All** | ✓ PASS | Happy path tests will verify confetti triggers, trophy displays with correct data, and next navigation works |
| **II. Flamboyant UI/UX** | ✓ PASS | Confetti burst is theatrical delight moment; spinning trophy adds playful visual flair |
| **III. Test-First Happy Path** | ✓ PASS | Will write tests for: viewport trigger → confetti fires, trophy displays names, next button advances |
| **IV. Code Clarity** | ✓ PASS | IntersectionObserver usage, confetti config, and navigation logic will be clearly documented |
| **V. Simplicity & Restraint** | ✓ PASS | Reuses existing TrophyPresentation component and session hooks; adds canvas-confetti (16KB) only |

**Re-check after Phase 1**: All gates remain PASS. Design uses existing React patterns, CSS animations, and lightweight library integration.

## Project Structure

### Documentation (this feature)

```text
specs/003-trophy-rizz/
├── plan.md              # This file (generated by /speckit.plan)
├── research.md          # Phase 0 output (library & pattern decisions)
├── data-model.md        # Phase 1 output (TrophyPresentation, PresentationSession)
├── quickstart.md        # Phase 1 output (setup & test instructions)
├── contracts/           # Phase 1 output (OpenAPI schema)
│   └── openapi.yaml
└── tasks.md             # Phase 2 output (/speckit.tasks - NOT created by /speckit.plan)
```

### Source Code (repository root)

```text
frontend/
├── src/
│   ├── components/
│   │   ├── TrophyPresentation.tsx      # UPDATE: Add confetti, 2D spin, text overlay
│   │   ├── TrophyPresentation.css      # UPDATE: Add spin animation, text positioning
│   │   ├── PresentTrophiesButton.tsx   # EXISTING: Navigation logic
│   │   └── RefreshButton.tsx           # EXISTING: Session refresh
│   ├── hooks/
│   │   ├── useIntersectionObserver.ts  # NEW: Viewport detection hook
│   │   └── useConfetti.ts              # NEW: Confetti trigger logic with 30s throttle
│   ├── services/
│   │   └── api.ts                      # EXISTING: No changes needed
│   └── pages/
│       └── [presentation-page].tsx     # UPDATE: Integrate next trophy controls
├── tests/
│   ├── unit/
│   │   ├── TrophyPresentation.test.tsx # NEW: Test confetti trigger, text display
│   │   ├── useIntersectionObserver.test.ts # NEW: Test viewport detection
│   │   └── useConfetti.test.ts         # NEW: Test throttle logic
│   └── integration/
│       └── TrophyFlow.test.tsx         # NEW: Test full presentation flow
└── package.json                         # UPDATE: Add canvas-confetti dependency

backend/
└── (No changes required - uses existing sessions/trophies endpoints)
```

**Structure Decision**: Frontend-only feature using existing backend API. All changes isolated to `TrophyPresentation` component, two new custom hooks, associated tests, and CSS animations. No new routes or API endpoints needed.

## Complexity Tracking

**No constitution violations** - All gates pass. This section intentionally left minimal.
